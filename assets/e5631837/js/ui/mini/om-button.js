(function(e){e.omWidget("om.omButton",{options:{disabled:null,label:null,icons:{left:null,right:null},width:null,onClick:null},_create:function(){this._determineButtonType();var t=e("<span>").addClass("om-btn om-state-default").css("border","none"),n=e("<span>").addClass("om-btn-bg om-btn-left"),r=e("<span>").addClass("om-btn-bg om-btn-center"),i=e("<span>").addClass("om-btn-bg om-btn-right");this.element.hasClass("apusic-btn-deepblue")&&t.addClass("apusic-btn-deepblue"),this.element.addClass("om-btn-txt").css({"background-position":"left center","background-repeat":"no-repeat"}).wrap(t).before(n).after(i).wrap(r)},_init:function(){var t=this,n=this.options,r=this.element;typeof n.disabled!="boolean"&&(n.disabled=r.propAttr("disabled"));if(r.attr("disabled")=="disabled"||n.disabled=="disabled")n.disabled=!0;this._initButton(),n.disabled&&(t._addClass("disabled"),r.css("cursor","default"));var i=r.parent().parent();i.bind("mouseenter",function(e){if(n.disabled)return!1;t._addClass("hover")}).bind("mouseleave",function(e){if(n.disabled)return!1;t._removeClass("hover"),t._removeClass("active")}).bind("click",function(e){if(n.disabled)return e.preventDefault(),e.stopImmediatePropagation(),!1;t.options.onClick&&t._trigger("onClick",e)}).bind("mousedown",function(e){if(n.disabled)return!1;t._addClass("active"),t._removeClass("focus");var r=n.onClick}).bind("mouseup",function(e){if(n.disabled)return!1;t._addClass("focus"),t._removeClass("active")}).bind("keydown",function(r){if(n.disabled)return!1;(r.keyCode==e.om.keyCode.SPACE||r.keyCode==e.om.keyCode.ENTER)&&t._addClass("active");if(r.keyCode==e.om.keyCode.SPACE){var i=n.onClick;if(i&&t._trigger("onClick",r)===!1)return}}).bind("keyup",function(){t._removeClass("active")}),r.bind("focus.button",function(e){if(n.disabled)return!1;t._addClass("focus")}).bind("blur.button",function(e){if(n.disabled)return!1;t._removeClass("focus")})},enable:function(){this._removeClass("disabled"),this.options.disabled=!1,this.element.css("cursor","pointer").removeAttr("disabled")},disable:function(){this._addClass("disabled"),this.options.disabled=!0,this.element.css("cursor","default"),(this.type=="input"||this.type=="button")&&this.element.attr("disabled","disabled")},click:function(){!this.options.disabled&&this.options.onClick&&this._trigger("onClick")},changeLabel:function(e){this.type=="a"?this.element.text(e):this.type=="input"?this.element.val(e):this.type=="button"&&this.element.html(e)},changeIcons:function(e){this.options.disabled||e&&(e.left?this.element.css("backgroundImage","url( "+e.left+" )"):null,e.right?this.element.next().attr("src",e.right):null)},destroy:function(){$el=this.element,$el.closest(".om-btn").after($el).remove()},_addClass:function(e){this.element.parent().parent().addClass("om-state-"+e)},_removeClass:function(e){this.element.parent().parent().removeClass("om-state-"+e)},_initButton:function(){var t=this.options,n=this._getLabel(),r=this.element;r.removeClass("om-btn-icon om-btn-only-icon").next("img").remove(),t.width>10&&r.parent().css("width",parseInt(t.width)-10),this.type=="a"||this.type=="button"?r.html(n):r.val(n),t.icons.left&&(n?r.addClass("om-btn-icon").css("background-image","url("+t.icons.left+")"):r.addClass("om-btn-only-icon").css("background-image","url("+t.icons.left+")")),t.icons.right&&(n!=""?e("<img>").attr("src",t.icons.right).css({"vertical-align":"baseline","padding-left":"3px"}).insertAfter(r):e("<img>").attr("src",t.icons.right).css("vertical-align","baseline").insertAfter(r))},_getLabel:function(){return this.options.label||this.element.html()||this.element.text()||this.element.val()},_determineButtonType:function(){this.element.is("input")?this.type="input":this.element.is("a")?this.type="a":this.element.is("button")&&(this.type="button")}})})(jQuery);