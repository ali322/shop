(function(e){function n(t,n){var r=t._oldPage,i=t.pageData.nowPage;return"input"===n?r!=e(".pControl input",t.element.closest(".om-grid")).val():"reload"===n?!0:r!=i}var t=[{cls:"pFirst",type:"first"},{cls:"pPrev",type:"prev"},{cls:"pNext",type:"next"},{cls:"pLast",type:"last"},{cls:"pReload",type:"reload"}];e.omWidget.addInitListener("om.omGrid",function(){var r=this,i=this._getColModel(),s=this._getHeaderCols().filter("[axis^='col']"),o=this.pDiv;e(s).each(function(t){var n=i[t].sort;if(n){var o=e(this).click(function(){var e=i[t].name,u=o.hasClass("asc")?"asc":o.hasClass("desc")?"desc":null,a=u=="asc"?"desc":"asc";s.removeClass("asc desc"),o.addClass(a);var f=r._extraData;delete f.sortBy,delete f.sortDir;switch(n){case"serverSide":f.sortBy=e,f.sortDir=a,r.reload();return;case"clientSide":n=function(t,n){var r=t[e],i=n[e];return r==i?0:r>i?1:-1};break;default:}var l=r.pageData.data;u==null?l.rows=l.rows.sort(n):l.rows=l.rows.reverse(),r.refresh()});o.children().first().append('<img class="om-grid-sortIcon" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="></img>')}});for(var u=0,a=t.length;u<a;u++)(function(u){o.find("."+t[u].cls).click(function(){var o=n(r,t[u].type);s.each(function(t){var n=e(this);o&&(n.hasClass("asc")||n.hasClass("desc"))&&"serverSide"!==i[t].sort&&n.removeClass("asc desc")})})})(u);e(".pControl input",o).keydown(function(t){var o=n(r,"input");t.keyCode==e.om.keyCode.ENTER&&s.each(function(t){var n=e(this);o&&(n.hasClass("asc")||n.hasClass("desc"))&&"serverSide"!==i[t].sort&&n.removeClass("asc desc")})}),this.clearSort=function(){var e=this._extraData;e.sortBy=undefined,e.sortDir=undefined,this._getHeaderCols().removeClass("asc desc")}})})(jQuery);