(function(e){var t=function(e,t,n){var r=e.indexOf(".");if(isNaN(e)&&e!=".")for(;isNaN(e);)e=e.substring(0,e.length-1);if(!n.allowNegative&&e.indexOf("-")!=-1){var i=e.split("-");e=i.join("")}return!n.allowDecimals&&r!=-1||e.charAt(e.length-1)==="."?e.substring(0,r):(r!=-1&&(e=e.substring(0,r+n.decimalPrecision+1)),e.length>0?parseFloat(e):"")};e.omWidget("om.omNumberField",{options:{allowDecimals:!0,allowNegative:!0,decimalPrecision:2,disabled:!1,onBlur:function(e){},readOnly:!1},_create:function(){var n=this.options,r=this;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled"),this.element.keypress(function(t){t.which==null&&(t.charCode!=null||t.keyCode!=null)&&(t.which=t.charCode!=null?t.charCode:t.keyCode);var n=t.which;if(n===8||n==46&&t.button==-1||n===0)return;var r=String.fromCharCode(n);e.data(this,"character",r);var i=e.data(this,"allowed");(i.indexOf(r)===-1||e(this).val().indexOf("-")!==-1&&r=="-"||e(this).val().indexOf(".")!==-1&&r==".")&&t.preventDefault()}).focus(function(){e(this).addClass("om-state-focus")}).blur(function(i){e(this).removeClass("om-state-focus");var s=e.data(this,"character");this.value=t(this.value,s,n),r._trigger("onBlur",i,this.value)}).keydown(function(e){r._checkLast(this),229===e.which&&e.preventDefault()}).keyup(function(e){r._checkLast(this)}).bind("cut paste",function(e){return!1})},_init:function(){var t=this.element,n=this.options;typeof n.disabled!="boolean"&&(n.disabled=t.attr("disabled")),n.readOnly&&t.attr("readonly","readonly");var r=e.data(t[0],"character");this._buildAllowChars(),n.disabled?this.disable():this.enable()},_checkLast:function(t){var n=t.value,r=n.length;if(n&&e.data(t,"allowed").indexOf(n.charAt(r-1))===-1||n.indexOf(".")!=n.lastIndexOf(".")||n.indexOf("-")!=n.lastIndexOf("-"))t.value=n=n.substring(0,r-- -1)},_buildAllowChars:function(){var t="0123456789";this.options.allowDecimals&&(t+="."),this.options.allowNegative&&(t+="-"),this.options.readOnly&&(t=""),e.data(this.element[0],"allowed",t)},disable:function(){this.element.attr("disabled",!0).addClass("om-numberfield-disabled")},enable:function(){this.element.attr("disabled",!1).removeClass("om-numberfield-disabled")}})})(jQuery);