(function(e){e.omWidget("om.omSlider",{options:{autoPlay:!0,interval:5e3,directionNav:!1,pauseOnHover:!0,controlNav:!0,activeNavCls:"nav-selected",effect:"fade",animSpeed:400,startSlide:0,delay:200,onBeforeSlide:function(e){},onAfterSlide:function(e){}},slideTo:function(e){opts=this.element.data("omSlider:opts"),this._slideTo(this.element,e)},next:function(){opts=this.element.data("omSlider:opts"),this._next(this.element)},prev:function(){opts=this.element.data("omSlider:opts"),this._prev(this.element)},destroy:function(){var t=this.element,n=this.options,r=this._getSliderVars(t);clearTimeout(r.slideTimer),clearInterval(r.autoPlayTimer),r.customNav&&e(n.controlNav).children().unbind(".omSlider").removeData("sid").removeClass(n.activeNavCls)},_getSliderVars:function(e){return e.data("omSlider:vars")},_runSlideEffect:function(t,n,r){var i=this,s=this._getSliderVars(t),o=t.find("ul.om-slider-content:first"),u=o.children(),a=this.options,f=0,l=0,c=r?r:a.effect;a.effect=="random"&&o.addClass("om-slider-effect-"+c),o.stop();if(c!="slide-v"&&c!="slide-h")return!1;var h=c=="slide-v";if(a.effect=="random"){var p=0;u.each(function(t){if(t===s.currentSlide)return!1;p-=h?e(this).height():e(this).width()}),o.css(h?"top":"left",p)}u.each(function(t){if(t==n)return!1;h?f-=e(this).height():l-=e(this).width()}),s.running=!0,o.animate({top:f,left:l},a.animSpeed,function(){s.running=!1,i._trigger("onAfterSlide",null,n)})},_runFadeEffect:function(t,n){var r=this,i=this._getSliderVars(t),s=t.find("ul.om-slider-content:first").children(),o=this.options;s.each(function(t){var s=e(this);t==n?(i.running=!0,s.fadeIn(o.animSpeed,function(){i.running=!1,r._trigger("onAfterSlide",null,n)})):t==i.currentSlide&&s.fadeOut(o.animSpeed)})},_runNoEffect:function(t,n){var r=this,i=this._getSliderVars(t),s=this.options,o=t.find("ul.om-slider-content:first").children();o.each(function(t){var s=e(this);t==n?(s.show(),r._trigger("onAfterSlide",null,n)):t==i.currentSlide&&s.hide()})},_toggleControlNav:function(t,n){var r=this._getSliderVars(t),i=this.options,s=t;r.customNav&&(s=e("body"));var o=s.find(r.controlNav).children();o.each(function(t){e(this).toggleClass(i.activeNavCls,t==n)})},_slideTo:function(e,t){var n=this._getSliderVars(e),r=e.find("ul.om-slider-content:first"),i=this.options,s=this;if(isNaN(t)||t<0||t>=n.totalSlides)return;if(this._trigger("onBeforeSlide",null,t)===!1)return!1;if(i.effect=="random"){var o=["fade","slide-h","slide-v"],u=o[Math.floor(Math.random()*3)];r.removeClass().addClass("om-slider-content"),r.removeAttr("style"),r.find("li").removeAttr("style"),u=="slide-h"||u=="slide-v"?s._runSlideEffect(e,t,u):s._runFadeEffect(e,t)}else i.effect=="slide-h"||i.effect=="slide-v"?s._runSlideEffect(e,t):i.effect=="fade"||i.effect===!0?s._runFadeEffect(e,t):s._runNoEffect(e,t);return n.controlNav&&s._toggleControlNav(e,t),n.currentSlide=t,e},_next:function(e){var t=this._getSliderVars(e),n=0;return t.currentSlide+2<=t.totalSlides&&(n=t.currentSlide+1),this._slideTo(e,n)},_prev:function(e){var t=this._getSliderVars(e),n=t.totalSlides-1;return t.currentSlide!=0&&(n=t.currentSlide-1),this._slideTo(e,n)},_processDirectionNav:function(t){var n=this._getSliderVars(t),r=e('<div class="om-slider-directionNav">').appendTo(t),i=this;e('<a class="om-slider-prevNav"></a>').appendTo(r).click(function(){if(n.running)return!1;i._prev(t)}),e('<a class="om-slider-nextNav"></a>').appendTo(r).click(function(){if(n.running)return!1;i._next(t)}),t.hover(function(){r.show()},function(){r.hide()})},_processControlNav:function(t){var n=this._getSliderVars(t),r=this.options,i=this,s;if(r.controlNav===!0||r.controlNav==="classical"){var o=e('<ul class="om-slider-nav-classical"></ul>');n.controlNav=".om-slider-nav-classical";for(s=0;s<n.totalSlides;s++){var u=e("<li>"+(s+1)+"</li>");u.data("sid",s);var a=0;u.click(function(){i._slideTo(t,e(this).data("sid"))}),u.hover(function(){if(n.running||n.stop)return!1;var s=e(this);if(s.hasClass(r.activeNavCls))return!1;n.slideTimer=a=setTimeout(function(){i._slideTo(t,s.data("sid"))},r.delay)},function(){clearTimeout(a)}),o.append(u)}t.append(o)}else if(r.controlNav==="dot"){var o=e('<div class="om-slider-nav-dot"></div>');n.controlNav=".om-slider-nav-dot";for(s=0;s<n.totalSlides;s++){var u=e('<a href="javascript:void(0)">'+(s+1)+"</a>");u.data("sid",s);var a=0;u.click(function(){i._slideTo(t,e(this).data("sid"))}),u.hover(function(){if(n.running||n.stop)return!1;var s=e(this);if(s.hasClass(r.activeNavCls))return!1;n.slideTimer=a=setTimeout(function(){i._slideTo(t,s.data("sid"))},r.delay)},function(){clearTimeout(a)}),o.append(u)}o.appendTo(t).css({marginLeft:-1*o.width()/2})}else if(e(r.controlNav).length>0){n.controlNav=r.controlNav,n.customNav=!0;var o=e(r.controlNav);o.children().each(function(s){var o=e(this);o.data("sid",s);var u=0;o.bind("click.omSlider",function(){i._slideTo(t,e(this).data("sid"))}),o.bind("mouseover.omSlider",function(){if(n.running||n.stop)return!1;var s=e(this);if(s.hasClass(r.activeNavCls))return!1;n.slideTimer=u=setTimeout(function(){i._slideTo(t,s.data("sid"))},r.delay)}).bind("mouseout.omSlider",function(){clearTimeout(u)})})}},_create:function(){function u(n,o){if(isNaN(o)||o<0||o>=s.totalSlides)return;var u=n.find("ul.om-slider-content:first"),a=u.children(),f=0,l=0;i.effect=="slide-h"?(a.each(function(t){if(t==o)return!1;l-=e(this).width()}),setTimeout(function(){u.css({left:l,top:f})},0)):i.effect=="slide-v"?(a.each(function(t){if(t==o)return!1;f-=e(this).height()}),setTimeout(function(){u.css({left:l,top:f})},0)):u.children().eq(o).show(),s.controlNav&&r._toggleControlNav(n,o),i.autoPlay&&(s.autoPlayTimer=t=setInterval(function(){r._next(n)},i.interval)),i.pauseOnHover&&n.hover(function(){s.paused=!0,clearInterval(t)},function(){s.paused=!1,i.autoPlay&&(s.autoPlayTimer=t=setInterval(function(){r._next(n)},i.interval))}),i.directionNav&&r._processDirectionNav(n)}var t=0,n=this.element,r=this,i=this.options,s={currentSlide:0,totalSlides:0,running:!1,paused:!1,stop:!1,controlNav:".om-slider-nav-classical"};n.data("omSlider",n).data("omSlider:vars",s).data("omSlider:opts",i).addClass("om-slider"),i.startSlide>0&&(s.currentSlide=i.startSlide);var o=n.children();o.wrapAll('<ul class="om-slider-content"></ul>').wrap('<li class="om-slider-item"></li>'),(i.effect=="slide-v"||i.effect=="slide-h")&&n.find(".om-slider-content").addClass("om-slider-effect-"+i.effect),s.totalSlides=o.length,this._processControlNav(n),i.startSlide>0&&(i.effect=="slide-h"||i.effect=="slide-v")?e(window).load(function(){u(n,i.startSlide)}):u(n,i.startSlide)}})})(jQuery);